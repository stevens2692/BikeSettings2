# BikeSettings2
#### Video Demo:  https://www.youtube.com/watch?v=zQALSM-_bEM&t=38s
#### Description: My final project for CS50x is called BikeSettings2 (this is the second version of an earlier project). One of my hobbies is mountain biking, and as part of mountain biking, having the correct settings for suspension and tyre pressures is important. For my final project, I wanted to create a web application that could be used to store the settings for mountain bikes. I chose the C# language for the project using ASP.NET and Entity framework with a model view controller (MVC) pattern. 

#### MODEL:	The program was built around the Bike model, which includes the Id, Manufacturer, Model, Front tyre PSI, Rear tyre PSI, Fork PSI, Fork rebound, Shock PSI, and Shock rebound. I then used Entity framework migrations to create the SQL database. As the project progressed, I had to update the schema of the database and create both up and down methods for the migrations. One of the main things I changed in the schema was allowing Shock PSI and Shock rebound to be nullable. This was due to the fact that not all mountain bikes have rear suspension.  Once the database was created, I made some initial dummy records in order to implement one of the first features of the website. 

#### Index View: The first feature I wanted to implement was a view which displayed all of the objects currently in the database. This was the index view for the bike controller. This was achieved by passing all objects within the database to the View as an IEnumerable. Once this was completed, I focused on iterating through every object displaying all of the attributes associated with it in an HTML table format. At this stage, I had not implemented the create function; therefore, I used the dummy records created within Sequel Server management studio to assess the functionality of the page. 

#### Create: Next, I worked on the create function. I created a new View called Create and added a Create button to the index View. In the bike controller, the get method returns the create view. The create view uses a HTML form for the user to input the relevant information to add a new bike/object to the database. The submit button on the form uses the post method of the create function in the bike controller. The create post method takes the new Bike object, adds it to the database, and then saves the changes. 

#### Images: I wanted the user to be able to add an image of their bike. To do this, I added an IFromfile called Image to the Bike model. I made this optional for the user. I then saved the uploaded image to file using each object's Id to rename the jpg. This allowed me to later implement the delete and edit functions and remove the image specific to each object from file. 

#### Edit: It was important to allow the user to edit existing objects and save the changes to database. I made a view similar to the Create view named Edit. An edit button was added to the index view, which linked to the Edit view. However, the edit button was made available for every object being displayed in the index view. The get method for Edit uses the relevant object Id to find the object in database and return the object to the Edit view. The Edit view uses the same form as the create function but is pre-filled with the attributes from the object selected from the database. The post method for Edit updates the object in the database. Handling the images at this point required some more thought. Firstly, the code checks whether Image is null. If image is null on the Edit form, nothing is changed for that object regarding images. If an image is uploaded during edit, the previous image is deleted from file (if it exists), and the  new image is saved to file named as the object Id. 

#### Delete: The delete button works in the same way as the edit button. It is available for every object within the database and when clicked it passes the relevant object to the delete view. Again, the delete view uses the same form as the create view which is pre-filled with the relevant object attributes, but all of the input fields are disabled within the HTML code. The delete post method removes the object from the database. For the images, the method checks if an image exists for the particular object and then removes it from file. 

#### Details: The details page is a simple view which gives a more clear display of the individual object selected from the index page. The details function simply passes the relevant object from database to the details view. The details view displays the information in a table format and, if an image exists, displays it clearly for the user. 

#### Search: The last feature I implemented was the search function. Search has a separate view in which the user inputs the searchphrase. The searchphrase is managed in a HTML form with asp-action 'Search'. The Search method in the bike controller takes this searchphrase as an input. The method then returns the index view but only displaying objects in the database that contain the searchphrase.  